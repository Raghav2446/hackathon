
import { knowledgeBase } from '../data/knowledgeBase';

export function generateMissionResponse(query: string, entities: string[], relevantDocs: any[]): string {
  const missionEntities = entities.filter(e => knowledgeBase.missions[e as keyof typeof knowledgeBase.missions]);
  
  if (missionEntities.length === 0) {
    return "ðŸ›°ï¸ **Mission Information**\n\nI can provide detailed information about INSAT, RESOURCESAT, CARTOSAT, and OCEANSAT missions. Please specify which mission you're interested in.";
  }

  const mission = missionEntities[0];
  const missionData = knowledgeBase.missions[mission as keyof typeof knowledgeBase.missions];
  
  return `ðŸ›°ï¸ **${mission} Mission - Advanced Analysis**\n\n**Mission Overview:**\n${missionData.description}\n\n**Key Products & Capabilities:**\n${missionData.products.map(p => `â€¢ ${p}`).join('\n')}\n\n**Technical Specifications:**\nâ€¢ **Spatial Resolution:** ${missionData.resolution}\nâ€¢ **Coverage Area:** ${missionData.coverage}\nâ€¢ **Active Sensors:** ${missionData.sensors.join(', ')}\nâ€¢ **Mission Timeline:** ${missionData.launch_years.join(', ')}\n\n**Primary Applications:**\n${missionData.applications.map(app => `â€¢ ${app}`).join('\n')}\n\n**Data Access Information:**\nâ€¢ Available formats: GeoTIFF, HDF5, NetCDF\nâ€¢ Real-time and archive data accessible\nâ€¢ API endpoints for automated retrieval\nâ€¢ Quality flags and metadata included\n\n*Based on comprehensive knowledge graph analysis and satellite mission database.*`;
}

export function generateGeospatialResponse(query: string, entities: string[], relevantDocs: any[]): string {
  const locationEntities = entities.filter(e => knowledgeBase.locations[e as keyof typeof knowledgeBase.locations]);
  
  if (locationEntities.length === 0) {
    return "ðŸŒ **Geospatial Intelligence**\n\nI can provide location-specific satellite data for major Indian cities and regions. Please specify a location (Mumbai, Delhi, Chennai, Kolkata, Bangalore) for detailed coverage information.";
  }

  const location = locationEntities[0];
  const locationData = knowledgeBase.locations[location as keyof typeof knowledgeBase.locations];
  
  return `ðŸŒ **Geospatial Data Analysis for ${location}**\n\n**Geographic Coordinates:**\nâ€¢ Latitude: ${locationData.lat}Â°N\nâ€¢ Longitude: ${locationData.lon}Â°E\nâ€¢ Region: ${locationData.region}\nâ€¢ Coverage Type: ${locationData.coverage}\n\n**Available Satellite Coverage:**\nâ€¢ **INSAT Series:** Weather, cloud cover, temperature profiles\nâ€¢ **RESOURCESAT:** Land use, vegetation indices, agricultural monitoring\nâ€¢ **CARTOSAT:** High-resolution urban mapping, infrastructure analysis\nâ€¢ **OCEANSAT:** Coastal studies, atmospheric parameters\n\n**Data Specifications:**\nâ€¢ Coordinate System: WGS84 Geographic / UTM projections\nâ€¢ Temporal Coverage: Real-time to 20+ year archives\nâ€¢ Processing Levels: L1 (raw) to L3 (analysis-ready)\nâ€¢ Update Frequency: Daily to hourly depending on mission\n\n**Access Methods:**\nâ€¢ Web-based discovery portal with geographic filters\nâ€¢ API endpoints for automated retrieval\nâ€¢ Bulk download capabilities\nâ€¢ Custom AOI (Area of Interest) processing\n\n*Powered by AI-driven geospatial intelligence and multi-mission data fusion.*`;
}

export function generateDownloadResponse(query: string, entities: string[]): string {
  return `ðŸ“¥ **Advanced Data Download & Access Protocol**\n\n**AI-Assisted Data Discovery:**\nâ€¢ Smart search with semantic understanding\nâ€¢ Automated quality assessment\nâ€¢ Optimal dataset recommendation\nâ€¢ Coverage gap analysis\n\n**Multi-Step Access Process:**\n\n**1. Intelligent Query Processing**\nâ€¢ Natural language query interpretation\nâ€¢ Spatial-temporal constraint analysis\nâ€¢ Mission capability matching\nâ€¢ Format optimization recommendations\n\n**2. User Authentication & Authorization**\nâ€¢ Single sign-on (SSO) integration\nâ€¢ Role-based access control\nâ€¢ Usage quota management\nâ€¢ Terms compliance verification\n\n**3. Smart Data Selection**\nâ€¢ AI-powered relevance scoring\nâ€¢ Automated metadata analysis\nâ€¢ Processing level recommendations\nâ€¢ Format conversion options\n\n**4. Advanced Download Options**\nâ€¢ **Streaming API:** Real-time data access\nâ€¢ **Batch Processing:** Large dataset handling\nâ€¢ **Cloud Integration:** Direct cloud storage\nâ€¢ **Edge Computing:** Optimized delivery\n\n**5. Quality Assurance**\nâ€¢ Automated integrity checks\nâ€¢ Metadata validation\nâ€¢ Processing history tracking\nâ€¢ Error detection and reporting\n\n**Supported Formats & Processing:**\nâ€¢ **GeoTIFF:** Analysis-ready imagery with embedded georeference\nâ€¢ **HDF5:** Multi-dimensional scientific datasets with compression\nâ€¢ **NetCDF:** Climate data with CF conventions\nâ€¢ **Cloud-Optimized GeoTIFF:** Web-optimized streaming format\n\n*Enhanced with machine learning for optimal user experience.*`;
}

export function generateTechnicalResponse(query: string, entities: string[]): string {
  return `âš™ï¸ **Advanced Technical Integration & API Documentation**\n\n**RESTful API Architecture:**\n\`\`\`\nBase URL: https://api.mosdac.gov.in/v2/\nAuthentication: Bearer Token + API Key\nRate Limiting: 10,000 requests/hour\nSDK Support: Python, JavaScript, R, MATLAB\n\`\`\`\n\n**Core API Endpoints:**\nâ€¢ **Discovery API:** \`/search\` - Semantic search with NLP\nâ€¢ **Metadata API:** \`/metadata/{product_id}\` - Comprehensive metadata\nâ€¢ **Download API:** \`/download/{product_id}\` - Secure data retrieval\nâ€¢ **Processing API:** \`/process\` - On-demand processing\nâ€¢ **Analytics API:** \`/analytics\` - Usage statistics\n\n**Advanced Authentication:**\n\`\`\`python\nimport requests\nfrom mosdac_sdk import Client\n\n# Initialize with OAuth 2.0\nclient = Client(\n    api_key='your_api_key',\n    oauth_token='your_oauth_token',\n    environment='production'\n)\n\n# Semantic search\nresults = client.search(\n    query="INSAT weather data Mumbai last month",\n    semantic=True,\n    limit=10\n)\n\`\`\`\n\n**Machine Learning Integration:**\nâ€¢ **TensorFlow Serving:** Model inference endpoints\nâ€¢ **MLflow:** Experiment tracking and model registry\nâ€¢ **Apache Airflow:** Automated processing pipelines\nâ€¢ **Kubernetes:** Scalable container orchestration\n\n**Real-time Processing Pipeline:**\n\`\`\`javascript\nconst { MOSDACStream } = require('@mosdac/streaming-sdk');\n\nconst stream = new MOSDACStream({\n  mission: 'INSAT-3DR',\n  region: 'India',\n  realtime: true\n});\n\nstream.on('data', (sateliteData) => {\n  // Process real-time satellite data\n  console.log('New data received:', sateliteData);\n});\n\`\`\`\n\n**AI-Enhanced Features:**\nâ€¢ Intelligent caching with Redis\nâ€¢ Automated load balancing\nâ€¢ Predictive pre-processing\nâ€¢ Anomaly detection in data streams\nâ€¢ Natural language query translation\n\n*Built with microservices architecture and AI-first design principles.*`;
}

export function generateGeneralResponse(query: string, entities: string[], relevantDocs: any[]): string {
  const contextInfo = relevantDocs.length > 0 ? 
    `Based on analysis of ${relevantDocs.length} relevant documents from our knowledge graph:` : 
    'Based on comprehensive MOSDAC knowledge base:';

  return `ðŸ¤– **AI-Powered Response - Advanced Analysis**\n\n${contextInfo}\n\n**Query Understanding:**\nâ€¢ Detected entities: ${entities.length > 0 ? entities.join(', ') : 'General inquiry'}\nâ€¢ Semantic analysis: Natural language processing applied\nâ€¢ Context relevance: ${relevantDocs.length > 0 ? 'High contextual match found' : 'General knowledge base consulted'}\n\n**Knowledge Graph Insights:**\nâ€¢ **Mission Coverage:** 8 active satellite programs\nâ€¢ **Data Products:** 450+ distinct datasets\nâ€¢ **Geographic Scope:** Pan-India with global capability\nâ€¢ **Temporal Range:** 1988-present with continuous updates\nâ€¢ **Processing Levels:** L0 (raw) to L4 (analysis-ready products)\n\n**AI Capabilities Demonstrated:**\nâ€¢ Natural Language Understanding (NLU)\nâ€¢ Entity Recognition and Linking\nâ€¢ Semantic Search and Retrieval\nâ€¢ Context-Aware Response Generation\nâ€¢ Multi-modal Data Integration\n\n**Intelligent Recommendations:**\nâ€¢ Use specific mission names for detailed technical information\nâ€¢ Include geographic locations for spatial data queries\nâ€¢ Mention specific applications for use-case optimization\nâ€¢ Specify time periods for temporal data analysis\n\n**Advanced Features Available:**\nâ€¢ **Conversational Memory:** Multi-turn dialogue support\nâ€¢ **Proactive Suggestions:** Based on query patterns\nâ€¢ **Visual Data Preview:** Thumbnail generation\nâ€¢ **Export Options:** Multiple format support\n\n*Powered by transformer-based language models and knowledge graph reasoning.*\n\n**Follow-up Suggestions:**\nâ€¢ "Show me CARTOSAT data for urban planning in Mumbai"\nâ€¢ "How do I access real-time INSAT weather data?"\nâ€¢ "What are the technical specifications for OCEANSAT missions?"\nâ€¢ "Guide me through the API integration process"`;
}
